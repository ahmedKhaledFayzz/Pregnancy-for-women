function startVoiceRecognition() {
  if ("webkitSpeechRecognition" in window) {
    const recognition = new webkitSpeechRecognition();
    recognition.lang = "ar";
    recognition.onresult = function (event) {
      const userInput = event.results[0][0].transcript;
      document.getElementById("user-input").value = userInput;
      sendMessage();
    };
    recognition.start();
  } else {
    alert("التعرف على الصوت غير مدعوم في متصفحك.");
  }
}

const emergencySymptoms = [
  "نزيف",
  "دوار",
  "ألم حاد",
  "ضغط الدم",
  "صداع شديد",
  "إقياء مستمر",
  "ألم البطن",
  "انخفاض الوزن",
  "ارتفاع درجة الحرارة",
  "تشنجات",
  "ضعف أو خدر",
  "أي أعراض غير طبيعية",
  "سيلان الدم من المهبل",
  "ألم أو احتقان في الثدي",
  "صعوبة التنفس",
  "ألم في الصدر",
  "نزيف من المهبل",
  "انتفاخ الساقين",
  "سلس البول",
];
const keywordsList = {
  رضاعة:
    "الرضاعة الطبيعية هي أفضل تغذية للطفل. تأكدي من وضعية الطفل الصحيحة أثناء الرضاعة. حاولي الرضاعة كل 2-3 ساعات، وتأكدي من حصول الطفل على ما يكفي من الحليب. تناولي وجبات صحية وكافية لزيادة إنتاج الحليب. إذا واجهت مشكلات، استشيري مستشار الرضاعة. تذكري أن الرضاعة الطبيعية توفر فوائد صحية وعاطفية لكل من الأم والطفل. حاولي الاستمرار في الرضاعة لمدة 6 أشهر على الأقل.",
  الرضاعة:
    "الرضاعة الطبيعية هي أفضل تغذية للطفل. تأكدي من وضعية الطفل الصحيحة أثناء الرضاعة. حاولي الرضاعة كل 2-3 ساعات، وتأكدي من حصول الطفل على ما يكفي من الحليب. تناولي وجبات صحية وكافية لزيادة إنتاج الحليب. إذا واجهت مشكلات، استشيري مستشار الرضاعة. تذكري أن الرضاعة الطبيعية توفر فوائد صحية وعاطفية لكل من الأم والطفل. حاولي الاستمرار في الرضاعة لمدة 6 أشهر على الأقل.",
  تغذية:
    "تناولي وجبات متوازنة غنية بالفيتامينات والمعادن، وركزي على البروتين والخضروات واأللياف. تجنبي المشروبات الغازية والأطعمة المقلية والحلويات. تناولي المكملات الغذائية الموصوفة من طبيبك. احرصي على شرب الكثير من السوائل. اتبعي نصائح طبيبك أو أخصائي التغذية لضمان حصولك على التغذية المناسبة أثناء الحمل والرضاعة.",
  التغذية:
    "تناولي وجبات متوازنة غنية بالفيتامينات والمعادن، وركزي على البروتين والخضروات واأللياف. تجنبي المشروبات الغازية والأطعمة المقلية والحلويات. تناولي المكملات الغذائية الموصوفة من طبيبك. احرصي على شرب الكثير من السوائل. اتبعي نصائح طبيبك أو أخصائي التغذية لضمان حصولك على التغذية المناسبة أثناء الحمل والرضاعة.",
  ولادة:
    "استعدي للولادة بتجهيز حقيبة المستشفى وحضور الدورات التحضيرية. ناقشي خيارات الولادة مع طبيبك واختاري الأسلوب المناسب لك. تعرفي على تقنيات التنفس والتخفيف من الألم. حددي من سيكون معك في غرفة الولادة. استعد نفسيًا وجسديًا لهذه التجربة المهمة. تعاوني مع طاقم الطب والتمريض طوال المراحل المختلفة للولادة.",
  الولادة:
    "استعدي للولادة بتجهيز حقيبة المستشفى وحضور الدورات التحضيرية. ناقشي خيارات الولادة مع طبيبك واختاري الأسلوب المناسب لك. تعرفي على تقنيات التنفس والتخفيف من الألم. حددي من سيكون معك في غرفة الولادة. استعد نفسيًا وجسديًا لهذه التجربة المهمة. تعاوني مع طاقم الطب والتمريض طوال المراحل المختلفة للولادة.",
  غثيان:
    "تناولي وجبات صغيرة ومتكررة وتجنبي الروائح القوية لتخفيف الغثيان. إذا لم يتحسن الوضع، استشيري طبيبك. قد يوصي بتناول أدوية مضادة للغثيان أو تغييرات في النظام الغذائي. حاولي الاسترخاء والتنفس العميق للتعامل مع الغثيان. إذا استمر الوضع، قد يكون هناك حاجة لإجراء تعديلات على نمط الحياة أو تلقي العلاج.",
  الغثيان:
    "تناولي وجبات صغيرة ومتكررة وتجنبي الروائح القوية لتخفيف الغثيان. إذا لم يتحسن الوضع، استشيري طبيبك. قد يوصي بتناول أدوية مضادة للغثيان أو تغييرات في النظام الغذائي. حاولي الاسترخاء والتنفس العميق للتعامل مع الغثيان. إذا استمر الوضع، قد يكون هناك حاجة لإجراء تعديلات على نمط الحياة أو تلقي العلاج.",
  تمارين:
    "يمكنك ممارسة التمارين الخفيفة مثل المشي واليوغا بعد استشارة الطبيب. تجنبي التمارين الشاقة أثناء الحمل. ركزي على تمارين التنفس والمرونة لتحضير الجسم للولادة. التمارين المنتظمة تساعد في الحفاظ على لياقتك البدنية وتخفيف الألم الظهري والتشنجات. استشيري طبيبك لتحديد البرنامج التمريني الآمن لك.",
  التمارين:
    "يمكنك ممارسة التمارين الخفيفة مثل المشي واليوغا بعد استشارة الطبيب. تجنبي التمارين الشاقة أثناء الحمل. ركزي على تمارين التنفس والمرونة لتحضير الجسم للولادة. التمارين المنتظمة تساعد في الحفاظ على لياقتك البدنية وتخفيف الألم الظهري والتشنجات. استشيري طبيبك لتحديد البرنامج التمريني الآمن لك.",
  نوم: "حاولي الحصول على قسط كاف من النوم والراحة خلال هذه الفترة. نم على الجانب الأيمن للمساعدة في تدفق الدم. استخدمي وسائل مساعدة للنوم كالنوم على الجانب أو استخدام الوسادات. تجنبي النوم على ظهرك خاصة في المراحل المتأخرة من الحمل. إذا واجهت صعوبات في النوم، تحدثي مع طبيبك للحصول على نصائح إضافية.",
  النوم:
    "حاولي الحصول على قسط كاف من النوم والراحة خلال هذه الفترة. نم على الجانب الأيمن للمساعدة في تدفق الدم. استخدمي وسائل مساعدة للنوم كالنوم على الجانب أو استخدام الوسادات. تجنبي النوم على ظهرك خاصة في المراحل المتأخرة من الحمل. إذا واجهت صعوبات في النوم، تحدثي مع طبيبك للحصول على نصائح إضافية.",
  الاجهاد:
    "اطلبي المساعدة من العائلة والأصدقاء عند الشعور بالإجهاد. حاولي الاسترخاء والقيام بأنشطة مريحة كالاستماع للموسيقى أو قضاء وقت في الطبيعة. ضع لنفسك جدولاً يومياً للراحة والاستجمام. ممارسة تقنيات التأمل والاسترخاء قد تساعدك على التعامل مع الإجهاد. إذا استمر الإجهاد، استشيري طبيبك أو أخصائي في الصحة النفسية.",
  الأجهاد:
    "اطلبي المساعدة من العائلة والأصدقاء عند الشعور بالإجهاد. حاولي الاسترخاء والقيام بأنشطة مريحة كالاستماع للموسيقى أو قضاء وقت في الطبيعة. ضع لنفسك جدولاً يومياً للراحة والاستجمام. ممارسة تقنيات التأمل والاسترخاء قد تساعدك على التعامل مع الإجهاد. إذا استمر الإجهاد، استشيري طبيبك أو أخصائي في الصحة النفسية.",
  إجهاد:
    "اطلبي المساعدة من العائلة والأصدقاء عند الشعور بالإجهاد. حاولي الاسترخاء والقيام بأنشطة مريحة كالاستماع للموسيقى أو قضاء وقت في الطبيعة. ضع لنفسك جدولاً يومياً للراحة والاستجمام. ممارسة تقنيات التأمل والاسترخاء قد تساعدك على التعامل مع الإجهاد. إذا استمر الإجهاد، استشيري طبيبك أو أخصائي في الصحة النفسية.",
  حساسية:
    "إذا كنت تعانين من حساسية، تجنبي الأطعمة المسببة لها وتناولي مكملات فيتامين C والأوميغا-3. تحدثي مع طبيبك عن أي حساسيات قد تظهر أثناء الحمل أو الرضاعة. قد يقترح طرق لإدارة الحساسية بأمان خلال هذه الفترة. تجنب التعرض للمواد الكيميائية القوية أو المنتجات العطرية التي قد تسبب تفاعلات.",
  الحساسية:
    "إذا كنت تعانين من حساسية، تجنبي الأطعمة المسببة لها وتناولي مكملات فيتامين C والأوميغا-3. تحدثي مع طبيبك عن أي حساسيات قد تظهر أثناء الحمل أو الرضاعة. قد يقترح طرق لإدارة الحساسية بأمان خلال هذه الفترة. تجنب التعرض للمواد الكيميائية القوية أو المنتجات العطرية التي قد تسبب تفاعلات.",
  استحمام:
    "استحمي بماء دافئ ولا تقضي وقتًا طويلاً في الحمام. تجنبي الاستحمام في درجات الحرارة المرتفعة. احرصي على تجفيف نفسك جيدًا بعد الاستحمام لتجنب الالتهابات. استخدمي منتجات خالية من المواد الكيميائية القوية وتجنبي الصابون المعطر. إذا شعرت بأي احمرار أو تهيج، استشيري طبيبك.",
  الاستحمام:
    "استحمي بماء دافئ ولا تقضي وقتًا طويلاً في الحمام. تجنبي الاستحمام في درجات الحرارة المرتفعة. احرصي على تجفيف نفسك جيدًا بعد الاستحمام لتجنب الالتهابات. استخدمي منتجات خالية من المواد الكيميائية القوية وتجنبي الصابون المعطر. إذا شعرت بأي احمرار أو تهيج، استشيري طبيبك.",
  ضغط: "راقبي ضغط دمك بانتظام واتبعي نصائح طبيبك لمراقبة ارتفاعه أو انخفاضه. قد يوصي بتغييرات في النظام الغذائي أو تناول أدوية معينة. إذا كان ضغط الدم مرتفعًا بشكل حاد، اتصلي بطبيبك على الفور. قد تكون هناك حاجة لعلاج طبي إضافي لحماية صحتك وصحة طفلك.",
  الضغط:
    "راقبي ضغط دمك بانتظام واتبعي نصائح طبيبك لمراقبة ارتفاعه أو انخفاضه. قد يوصي بتغييرات في النظام الغذائي أو تناول أدوية معينة. إذا كان ضغط الدم مرتفعًا بشكل حاد، اتصلي بطبيبك على الفور. قد تكون هناك حاجة لعلاج طبي إضافي لحماية صحتك وصحة طفلك.",
  السكر:
    "إذا ُشخّصت بسكر الحمل، اتبعي نظامًا غذائيًا مناسبًا وتناول الأدوية عند الضرورة. قم بفحوصات دورية لمراقبة مستويات السكر. التحكم الجيد في سكر الدم أمر حيوي لصحتك وصحة طفلك. استشر طبيبك وأخصائي التغذية للحصول على إرشادات محددة لإدارة سكر الحمل.",
  الاكتئاب:
    "إذا شعرت بالاكتئاب أو القلق، تحدثي مع طبيبك أو استشيري أخصائي في الصحة النفسية. قد تحتاجين إلى علاج نفسي أو دوائي. لا تتردي في طلب المساعدة. التغييرات الهرمونية والضغوط النفسية قد تزيد من مخاطر الاكتئاب أثناء هذه الفترة. الدعم العاطفي والممارسات الاسترخائية قد تساعد أيضًا.",
  الألم:
    "إذا شعرت بألم حاد، تناولي المسكنات الموصوفة من طبيبك واستشيريه على الفور. قد يكون الألم علامة على مشكلة طبية تحتاج إلى تقييم. تجنبي استخدام أدوية غير موصوفة دون استشارة الطبيب. تحدثي مع طبيبك عن أفضل طرق إدارة الألم بأمان أثناء الحمل والرضاعة.",
  الإمساك:
    "تناولي الألياف والسوائل الكافية وتحركي بانتظام للتخفيف من الإمساك. قد يوصي طبيبك بتناول ملينات أو أدوية أخرى إذا استمر الإمساك. تجنبي استخدام ملينات قوية أو أدوية بدون استشارة طبيب. الإمساك يمكن أن يتسبب في مشكلات جدية أثناء الحمل، لذا استشيري طبيبك إذا لم تتحسن الحالة.",
  الشهية:
    "إذا عانيت من فقدان الشهية، حاولي تناول وجبات صغيرة ومتكررة وإضافة المكملات الغذائية. استشيري طبيبك إذا لم تتحسن الحالة. قد يكون هناك أسباب طبية وراء فقدان الشهية يجب معالجتها. الحفاظ على التغذية المناسبة مهم للنمو السليم للجنين وصحتك.",
  فقدان:
    "إذا عانيت من فقدان الشهية، حاولي تناول وجبات صغيرة ومتكررة وإضافة المكملات الغذائية. استشيري طبيبك إذا لم تتحسن الحالة. قد يكون هناك أسباب طبية وراء فقدان الشهية يجب معالجتها. الحفاظ على التغذية المناسبة مهم للنمو السليم للجنين وصحتك.",
  ألم: "مارسي تمارين تقوية العضلات واستخدمي وسائل الراحة كالوسائد. تجنبي الوقوف لفترات طويلة والرفع الثقيل. استشيري طبيبك عند الحاجة. قد يوصي بعلاجات طبيعية كالتدليك أو العلاج الفيزيائي لتخفيف آلام الظهر. تجنبي استخدام أدوية إلا بإشراف طبيب.",
  الظهر:
    "مارسي تمارين تقوية العضلات واستخدمي وسائل الراحة كالوسائد. تجنبي الوقوف لفترات طويلة والرفع الثقيل. استشيري طبيبك عند الحاجة. قد يوصي بعلاجات طبيعية كالتدليك أو العلاج الفيزيائي لتخفيف آلام الظهر. تجنبي استخدام أدوية إلا بإشراف طبيب.",
  تورم: "رفعي أقدامك وارتدي جوارب ضاغطة. تجنبي الوقوف لفترات طويلة. إذا اقترن التورم بأعراض أخرى، استشيري طبيبك على الفور. قد يكون التورم علامة على مشكلة طبية تحتاج إلى رعاية فورية. تابعي نصائح طبيبك لإدارة التورم بأمان.",
  الأطراف:
    "رفعي أقدامك وارتدي جوارب ضاغطة. تجنبي الوقوف لفترات طويلة. إذا اقترن التورم بأعراض أخرى، استشيري طبيبك على الفور. قد يكون التورم علامة على مشكلة طبية تحتاج إلى رعاية فورية. تابعي نصائح طبيبك لإدارة التورم بأمان.",
  الهرمونات:
    "التغيرات الهرمونية أثناء الحمل والرضاعة قد تؤثر على الحالة المزاجية والبشرة والوزن. تحدثي مع طبيبك إذا واجهت صعوبات. قد يوصي بتعديلات في نمط الحياة أو علاجات طبية إذا كانت التأثيرات الهرمونية شديدة. الدعم العاطفي والممارسات الاسترخائية قد تساعد أيضًا.",
  الحليب:
    "إذا شعرت بانسداد أو التهاب في الثدي، ضعي كمادات دافئة وحاولي إفراغ الثدي بالرضاعة أو التدليك برفق. استشيري طبيبك إذا لم يتحسن الوضع. قد يكون هناك حاجة لعلاج طبي إضافي لتجنب المضاعفات. تجنبي استخدام قوة مفرطة أثناء الرضاعة أو التدليك لتفادي المزيد من المشاكل.",
  المتجمع:
    "إذا شعرت بانسداد أو التهاب في الثدي، ضعي كمادات دافئة وحاولي إفراغ الثدي بالرضاعة أو التدليك برفق. استشيري طبيبك إذا لم يتحسن الوضع. قد يكون هناك حاجة لعلاج طبي إضافي لتجنب المضاعفات. تجنبي استخدام قوة مفرطة أثناء الرضاعة أو التدليك لتفادي المزيد من المشاكل.",
  الثدي:
    "إذا شعرت بانسداد أو التهاب في الثدي، ضعي كمادات دافئة وحاولي إفراغ الثدي بالرضاعة أو التدليك برفق. استشيري طبيبك إذا لم يتحسن الوضع. قد يكون هناك حاجة لعلاج طبي إضافي لتجنب المضاعفات. تجنبي استخدام قوة مفرطة أثناء الرضاعة أو التدليك لتفادي المزيد من المشاكل.",
  ثدي: "إذا شعرت بانسداد أو التهاب في الثدي، ضعي كمادات دافئة وحاولي إفراغ الثدي بالرضاعة أو التدليك برفق. استشيري طبيبك إذا لم يتحسن الوضع. قد يكون هناك حاجة لعلاج طبي إضافي لتجنب المضاعفات. تجنبي استخدام قوة مفرطة أثناء الرضاعة أو التدليك لتفادي المزيد من المشاكل.",
  الغذاء:
    "يعتبر النظام الغذائي المتوازن خلال الحمل ضروري. تناولي البروتين والخضروات والفواكه الطازجة، تجنبي الأطعمة المصنعة والسكريات المفرطة. قومي بزيادة تناول السوائل.",
  الفواكه:
    "تناولي فواكه طازجة وغنية بالألياف مثل التفاح، التوت، والموز لدعم هضمك والحفاظ على مستويات الطاقة لديك. الفواكه مليئة بالفيتامينات والمعادن الهامة لك وللجنين.",
  الكالسيوم:
    "الكالسيوم ضروري لنمو عظام الجنين. يمكنك الحصول عليه من مصادر مثل الحليب، الزبادي، الجبن، والبروكلي. اسألي طبيبك عن جرعة الكالسيوم اليومية المناسبة لك.",
  الحديد:
    "الحديد مهم خلال الحمل لمنع فقر الدم. يمكنك زيادة الحديد بتناول اللحوم الحمراء، السبانخ، البقوليات والمكسرات. استشيري طبيبك للحصول على مكملات إذا لزم الأمر.",
  بروتين:
    "يجب أن يتوفر البروتين في نظامك الغذائي من مصادر كالدجاج، البيض، الأجبان، والفاصوليا لدعم نمو خلايا الجنين وصحتك.",
  "أعراض الحمل":
    "تشمل الأعراض الشائعة للحمل الغثيان، التعب، التبول المتكرر، تغيرات الشهية، والتقلبات المزاجية. تحدثي مع طبيبك إذا كانت الأعراض شديدة أو تزداد سوءاً.",
  الفحوصات:
    "يجب عليك القيام بفحوصات منتظمة لمتابعة نمو الجنين وصحتك. تشمل هذه الفحوصات اختبارات الدم، فحص السكري، وفحص نمو الجنين باستخدام السونار.",
  الرياضة:
    "تعد الرياضة الخفيفة مثل المشي، اليوغا وتمارين التنفس آمنة ومفيدة للحامل. تجنبي الرياضات الشاقة واستشيري طبيبك قبل البدء بأي تمرين.",
  النوم:
    "النوم الجيد مهم للحامل. حاولي النوم على جانبك الأيمن أو الأيسر لتحسين تدفق الدم إلى الجنين. استخدمي وسائد دعم إضافية إذا لزم الأمر.",
  "مضاعفات الحمل":
    "تتضمن المضاعفات الشائعة سكري الحمل، ارتفاع ضغط الدم، وفقر الدم. حافظي على زياراتك للطبيب لمتابعة أي تطورات صحية طارئة.",
  الاسترخاء:
    "حاولي تخصيص وقت للراحة والاسترخاء، حيث أن الحمل فترة مجهدة على الجسم والعقل. يمكن أن يساعدك التأمل والاستماع للموسيقى الهادئة.",
  الولادة:
    "تعتبر الولادة عملية طبيعية تتطلب استعداداً ذهنياً وجسدياً. جهزي حقيبة المستشفى في الشهر الثامن وناقشي خطة الولادة مع طبيبك.",
  الألم:
    "يمكنك استخدام تقنيات التنفس والتدليك للتقليل من ألم الظهر. استشيري طبيبك حول الأدوية المسكنة الآمنة للحمل إذا لزم الأمر.",
  العناية:
    "يمكن أن تؤدي التغيرات الهرمونية إلى مشاكل بالبشرة. استخدمي منتجات مرطبة وآمنة للحامل وتجنبي استخدام مواد كيميائية قوية.",
  الحموضة:
    "تعد الحموضة مشكلة شائعة أثناء الحمل بسبب ضغط الرحم المتزايد. حاولي تناول وجبات صغيرة وتجنبي الأطعمة الحارة والمقلية.",
  التورم:
    "قد يحدث التورم في الأطراف بسبب احتباس السوائل. رفعي قدميك بشكل متكرر، واشربي كمية كافية من الماء للتخفيف من الأعراض.",
  متابعة:
    "مراقبة حركة الجنين مهمة. حاولي مراقبة النشاط اليومي للجنين في الثلث الأخير، وإذا لاحظتِ قلة الحركة، اتصلي بطبيبك.",
  الحركة:
    "مراقبة حركة الجنين مهمة. حاولي مراقبة النشاط اليومي للجنين في الثلث الأخير، وإذا لاحظتِ قلة الحركة، اتصلي بطبيبك.",
  الكاذب:
    "في أواخر الحمل، قد تشعرين بانقباضات خفيفة. إذا كانت متباعدة وغير منتظمة، فهي غالباً مخاض كاذب.",
  المخاض:
    "في أواخر الحمل، قد تشعرين بانقباضات خفيفة. إذا كانت متباعدة وغير منتظمة، فهي غالباً مخاض كاذب.",
  التنفس:
    "تمارين التنفس العميق قد تساعدك على التهدئة والتخفيف من توتر العضلات أثناء الحمل والولادة. قومي بها بشكل يومي للحصول على أفضل النتائج.",
  تمارين:
    "تمارين التنفس العميق قد تساعدك على التهدئة والتخفيف من توتر العضلات أثناء الحمل والولادة. قومي بها بشكل يومي للحصول على أفضل النتائج.",
  والأظافر:
    "قد تلاحظين زيادة نمو الشعر وقوة الأظافر نتيجة التغيرات الهرمونية. العناية بهذه الجوانب تساعدك في الشعور بالراحة والجمال.",
  الشعر:
    "قد تلاحظين زيادة نمو الشعر وقوة الأظافر نتيجة التغيرات الهرمونية. العناية بهذه الجوانب تساعدك في الشعور بالراحة والجمال.",
  الولادة:
    "ناقشي مع طبيبك حول خيارات الولادة سواء كانت طبيعية، قيصرية، أو مع تسكين الألم. التخطيط سيساعدك على الشعور بالأمان والاستعداد.",
  تخطيط:
    "ناقشي مع طبيبك حول خيارات الولادة سواء كانت طبيعية، قيصرية، أو مع تسكين الألم. التخطيط سيساعدك على الشعور بالأمان والاستعداد.",
  التنفس:
    "قد تعانين من ضيق التنفس خاصة في الشهور الأخيرة. حاولي النوم بوضعية مائلة وتجنبي الأنشطة المجهدة لتحسين التنفس.",
  مشاكل:
    "قد تعانين من ضيق التنفس خاصة في الشهور الأخيرة. حاولي النوم بوضعية مائلة وتجنبي الأنشطة المجهدة لتحسين التنفس.",
  النفسية:
    "تعتبر الصحة النفسية مهمة للغاية أثناء الحمل. إذا شعرت بالاكتئاب أو القلق، تحدثي مع طبيبك أو مستشار متخصص لمساعدتك.",
  الصباحي:
    "الغثيان يحدث في معظم الأحيان في الصباح. حاولي تناول وجبات خفيفة قبل النهوض من السرير، وتجنبي الروائح القوية.",
  مشاكل:
    "الغثيان يحدث في معظم الأحيان في الصباح. حاولي تناول وجبات خفيفة قبل النهوض من السرير، وتجنبي الروائح القوية.",
  الطبيب:
    "من الضروري القيام بزيارات دورية للطبيب لمتابعة الحالة الصحية العامة لكِ ولجنينك، وإجراء الفحوصات المطلوبة.",
  زيارة:
    "من الضروري القيام بزيارات دورية للطبيب لمتابعة الحالة الصحية العامة لكِ ولجنينك، وإجراء الفحوصات المطلوبة.",
};

function extractKeywords(input) {
  const words = input.toLowerCase().split(/\s+/);
  return words.filter((word) => Object.keys(keywordsList).includes(word));
}

function calculatePregnancy() {
  const startDate = document.getElementById("start-date").value;
  if (startDate) {
    const start = new Date(startDate);
    const today = new Date();
    const diffTime = Math.abs(today - start);
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    const months = Math.floor(diffDays / 30);
    const weeks = Math.floor((diffDays % 30) / 7);
    const dueDate = new Date(start.getTime() + 280 * 24 * 60 * 60 * 1000);
    document.getElementById(
      "result"
    ).innerHTML = `لقد مر ${months} شهر و ${weeks} أسبوع منذ بداية الحمل.<br>موعد الولادة المتوقع: ${dueDate.toLocaleDateString(
      "ar-EG"
    )}`;
  } else {
    document.getElementById("result").innerText = "الرجاء إدخال تاريخ صحيح.";
  }
}

function getResponse(input) {
  const chatBox = document.getElementById("chat-box");
  const keywords = extractKeywords(input);
  let response = "";

  if (keywords.length > 0) {
    response = keywords
      .map((keyword) => keywordsList[keyword])
      .join("<br><br>");
  } else if (
    input
      .toLowerCase()
      .split(/\s+/)
      .some((word) => emergencySymptoms.includes(word))
  ) {
    response =
      "تحذير: الأعراض المذكورة قد تشير لحالة طبية طارئة. يرجى التوجه للطبيب فوراً.";
  } else {
    response =
      "شكرًا لسؤالك! تذكري دائمًا أن تستشيري الطبيب للحصول على معلومات دقيقة.";
  }

  chatBox.innerHTML += `<div class="chat-message assistant-message"><strong>الطبيب الأفتراضي:</strong> ${response}</div>`;
}

function sendMessage() {
  const userInput = document.getElementById("user-input").value;
  const chatBox = document.getElementById("chat-box");
  if (userInput) {
    chatBox.innerHTML += `<div class="chat-message user-message"><strong>أنت:</strong> ${userInput}</div>`;
    getResponse(userInput);
    document.getElementById("user-input").value = "";
    chatBox.scrollTop = chatBox.scrollHeight;
  }
}

function toggleAnswer(element) {
  const answer = element.nextElementSibling;
  answer.style.display = answer.style.display === "none" ? "block" : "none";
}
